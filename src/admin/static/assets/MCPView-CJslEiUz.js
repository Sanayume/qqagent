import{A as e,C as t,D as n,F as r,M as i,T as a,b as o,g as s,j as c,k as l,l as u,p as d,v as f,x as p}from"./index-DTcooqcV.js";var m={class:`h-full flex flex-col p-6`},h={key:0,class:`text-center py-20 text-gray-500`},g={key:1,class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},_={class:`flex items-start justify-between mb-4`},v={class:`flex items-center gap-3`},y={class:`text-xl font-bold text-white`},b={class:`flex gap-2 opacity-0 group-hover:opacity-100 transition-all`},x=[`onClick`],S=[`onClick`],C={class:`space-y-3 text-sm text-gray-400 mb-4`},w={class:`flex gap-2`},T={class:`text-miku-400 bg-miku-500/10 px-1 rounded`},E={class:`flex gap-2`},D={class:`truncate`},O={key:2,class:`fixed inset-0 z-50 flex items-center justify-center p-4`},k={class:`relative w-full max-w-lg bg-night-900 border border-gray-700 rounded-2xl shadow-2xl p-6 animate-float`},A={class:`text-2xl font-bold text-white mb-6`},j={class:`space-y-4`},M=[`disabled`],N={class:`flex gap-3 mt-8 justify-end`},P=a({__name:`MCPView`,setup(a){let P=i([]),F=i(!1),I=i(!1),L=i(!1),R=i({name:``,command:``,args:``,env:``});async function z(){F.value=!0;try{let e=await u.get(`/api/mcp/servers`);P.value=Object.entries(e.data).map(([e,t])=>({name:e,config:t,status:`configured`}))}catch(e){console.error(e)}finally{F.value=!1}}function B(){L.value=!1,R.value={name:``,command:``,args:``,env:`{}`},I.value=!0}function V(e){L.value=!0,R.value={name:e.name,command:e.config.command,args:JSON.stringify(e.config.args),env:JSON.stringify(e.config.env,null,2)},I.value=!0}async function H(){try{let e=[];try{e=R.value.args.trim()?JSON.parse(R.value.args):[]}catch{alert(`Args å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON æ•°ç»„`);return}let t={};try{t=JSON.parse(R.value.env||`{}`)}catch{alert(`Env å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON å¯¹è±¡`);return}let n={command:R.value.command,args:e,env:t};L.value?await u.put(`/api/mcp/servers/${R.value.name}`,n):await u.post(`/api/mcp/servers`,{name:R.value.name,config:n}),I.value=!1,z()}catch(e){alert(e.response?.data?.detail||`æ“ä½œå¤±è´¥`)}}async function U(e){if(confirm(`ç¡®å®šè¦åˆ é™¤ ${e} å—ï¼Ÿ`))try{await u.delete(`/api/mcp/servers/${e}`),z()}catch(e){console.error(e)}}return n(z),(n,i)=>(l(),p(`div`,m,[f(`div`,{class:`flex items-center justify-between mb-8`},[i[7]||=f(`div`,null,[f(`h1`,{class:`text-3xl font-bold text-white mb-2`},`MCP æœåŠ¡å™¨ç®¡ç†`),f(`p`,{class:`text-gray-400`},`ç®¡ç† Model Context Protocol æœåŠ¡å™¨é…ç½®`)],-1),f(`button`,{onClick:B,class:`px-6 py-3 bg-gradient-to-r from-miku-500 to-miku-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-miku-500/20 active:scale-95 transition-all flex items-center gap-2`},[...i[6]||=[f(`span`,null,`â•`,-1),t(` æ·»åŠ æœåŠ¡å™¨ `,-1)]])]),F.value?(l(),p(`div`,h,`åŠ è½½ä¸­...`)):(l(),p(`div`,g,[(l(!0),p(s,null,e(P.value,e=>(l(),p(`div`,{key:e.name,class:`bg-night-900/50 backdrop-blur border border-sakura-500/10 rounded-2xl p-6 hover:border-sakura-500/30 transition-all group relative overflow-hidden`},[i[12]||=f(`div`,{class:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-miku-500/10 to-transparent rounded-bl-3xl -z-10 group-hover:from-miku-500/20 transition-all`},null,-1),f(`div`,_,[f(`div`,v,[i[9]||=f(`div`,{class:`w-12 h-12 bg-gray-800 rounded-xl flex items-center justify-center text-2xl border border-white/5`},` ğŸ”Œ `,-1),f(`div`,null,[f(`h3`,y,r(e.name),1),i[8]||=f(`div`,{class:`flex items-center gap-2 mt-1`},[f(`span`,{class:`w-2 h-2 rounded-full bg-green-500`}),f(`span`,{class:`text-xs text-gray-400`},`Configured`)],-1)])]),f(`div`,b,[f(`button`,{onClick:t=>V(e),class:`p-2 hover:bg-white/10 rounded-lg text-gray-300 hover:text-white transition-colors`,title:`ç¼–è¾‘`},` âœï¸ `,8,x),f(`button`,{onClick:t=>U(e.name),class:`p-2 hover:bg-red-500/20 rounded-lg text-gray-300 hover:text-red-400 transition-colors`,title:`åˆ é™¤`},` ğŸ—‘ï¸ `,8,S)])]),f(`div`,C,[f(`div`,w,[i[10]||=f(`span`,{class:`w-16 shrink-0 text-gray-500`},`Command:`,-1),f(`code`,T,r(e.config.command),1)]),f(`div`,E,[i[11]||=f(`span`,{class:`w-16 shrink-0 text-gray-500`},`Args:`,-1),f(`span`,D,r(e.config.args.join(` `)||`(none)`),1)])])]))),128))])),I.value?(l(),p(`div`,O,[f(`div`,{class:`absolute inset-0 bg-black/60 backdrop-blur-sm`,onClick:i[0]||=e=>I.value=!1}),f(`div`,k,[f(`h2`,A,r(L.value?`ç¼–è¾‘æœåŠ¡å™¨`:`æ·»åŠ æœåŠ¡å™¨`),1),f(`div`,j,[f(`div`,null,[i[13]||=f(`label`,{class:`block text-sm text-gray-400 mb-1`},`Server Name`,-1),c(f(`input`,{"onUpdate:modelValue":i[1]||=e=>R.value.name=e,disabled:L.value,type:`text`,class:`w-full bg-night-950 border border-gray-700 rounded-xl px-4 py-2 text-white outline-none focus:border-sakura-500 transition-colors disabled:opacity-50`},null,8,M),[[d,R.value.name]])]),f(`div`,null,[i[14]||=f(`label`,{class:`block text-sm text-gray-400 mb-1`},`Command`,-1),c(f(`input`,{"onUpdate:modelValue":i[2]||=e=>R.value.command=e,type:`text`,placeholder:`e.g. npx, python, uvx`,class:`w-full bg-night-950 border border-gray-700 rounded-xl px-4 py-2 text-white outline-none focus:border-sakura-500 transition-colors`},null,512),[[d,R.value.command]])]),f(`div`,null,[i[15]||=f(`label`,{class:`block text-sm text-gray-400 mb-1`},`Args (JSON Array)`,-1),c(f(`textarea`,{"onUpdate:modelValue":i[3]||=e=>R.value.args=e,rows:`3`,placeholder:`["-y", "@modelcontextprotocol/server-filesystem", "C:\\\\Users"]`,class:`w-full bg-night-950 border border-gray-700 rounded-xl px-4 py-2 text-white outline-none focus:border-sakura-500 transition-colors font-mono text-sm`},null,512),[[d,R.value.args]])]),f(`div`,null,[i[16]||=f(`label`,{class:`block text-sm text-gray-400 mb-1`},`Env (JSON Object)`,-1),c(f(`textarea`,{"onUpdate:modelValue":i[4]||=e=>R.value.env=e,rows:`3`,placeholder:`{"KEY": "VALUE"}`,class:`w-full bg-night-950 border border-gray-700 rounded-xl px-4 py-2 text-white outline-none focus:border-sakura-500 transition-colors font-mono text-sm`},null,512),[[d,R.value.env]])])]),f(`div`,N,[f(`button`,{onClick:i[5]||=e=>I.value=!1,class:`px-4 py-2 rounded-lg text-gray-400 hover:text-white hover:bg-white/5 transition-colors`},` å–æ¶ˆ `),f(`button`,{onClick:H,class:`px-6 py-2 bg-sakura-500 hover:bg-sakura-600 text-white rounded-lg font-bold transition-colors`},` ä¿å­˜ `)])])])):o(``,!0)]))}});export{P as default};