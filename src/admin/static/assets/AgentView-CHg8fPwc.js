import{n as e,r as ee,t}from"./x-D5kKGpT7.js";import{t as n}from"./circle-alert-C_gjvpF9.js";import{t as te}from"./clock-CG7H181w.js";import{A as r,C as ne,D as re,F as i,M as a,N as o,P as s,T as ie,_ as ae,a as oe,b as c,g as l,j as u,k as d,n as se,o as f,p,s as m,u as h,v as g,w as _,x as v}from"./index-DTcooqcV.js";var y=m(`database`,[[`ellipse`,{cx:`12`,cy:`5`,rx:`9`,ry:`3`,key:`msslwz`}],[`path`,{d:`M3 5V19A9 3 0 0 0 21 19V5`,key:`1wlel7`}],[`path`,{d:`M3 12A9 3 0 0 0 21 12`,key:`mv7ke4`}]]),ce=m(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),le={class:`h-full flex flex-col gap-6`},b={class:`flex items-center justify-between`},x=[`disabled`],S={key:0,class:`bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2`},C={class:`font-medium`},w={key:1,class:`bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2`},T={class:`font-medium`},E={class:`grid grid-cols-1 lg:grid-cols-3 gap-6`},D={class:`lg:col-span-2 bg-white rounded-2xl border border-gray-100 shadow-sm p-6`},O={class:`flex items-center gap-3 mb-6`},k={class:`w-10 h-10 bg-kivotos-cyan/10 rounded-lg flex items-center justify-center`},A={class:`ml-auto flex items-center gap-2`},j={key:0,class:`grid grid-cols-2 md:grid-cols-4 gap-4 mb-6`},M={class:`bg-slate-50 rounded-xl p-4`},N={class:`flex items-center gap-2 text-gray-500 mb-1`},P={class:`font-mono font-bold text-kivotos-navy`},F={class:`bg-slate-50 rounded-xl p-4`},I={class:`flex items-center gap-2 text-gray-500 mb-1`},L={class:`font-mono font-bold text-kivotos-navy`},R={class:`bg-slate-50 rounded-xl p-4`},z={class:`flex items-center gap-2 text-gray-500 mb-1`},B={class:`bg-slate-50 rounded-xl p-4`},V={class:`flex items-center gap-2 text-gray-500 mb-1`},H={class:`font-mono font-bold text-kivotos-navy`},U={key:1,class:`border-t pt-4`},W={class:`flex items-center justify-between mb-4`},ue={key:0,class:`grid grid-cols-2 gap-4`},de={class:`font-mono text-sm font-bold text-kivotos-navy`},fe={class:`font-mono text-sm text-kivotos-navy truncate`},pe={key:1,class:`space-y-4`},me=[`disabled`],he={key:2,class:`border-t pt-4 mt-4`},ge={class:`flex items-center gap-2 mb-3`},_e={class:`font-bold text-sm text-gray-700`},ve={class:`flex flex-wrap gap-2`},ye={class:`bg-white rounded-2xl border border-gray-100 shadow-sm p-6`},be={class:`flex items-center justify-between mb-4`},xe={class:`flex items-center gap-2`},Se={key:0,class:`text-center py-8 text-gray-400`},Ce={key:1,class:`space-y-2 max-h-[400px] overflow-y-auto`},we={class:`min-w-0 flex-1`},Te=[`title`],Ee={class:`text-xs text-gray-500`},De=[`onClick`],G=ie({__name:`AgentView`,setup(ie){let m=a(null),G=a([]),K=a(!1),q=a(!1),J=a(``),Y=a(``),X=a({model:``,base_url:``,api_key:``}),Z=a(!1);async function Q(){K.value=!0,J.value=``;try{let e=await h.get(`/api/agent/status`);m.value=e.data,X.value.model=e.data.model||``,X.value.base_url=e.data.base_url||``}catch(e){J.value=e.response?.data?.detail||`Failed to fetch status`}finally{K.value=!1}}async function $(){try{G.value=(await h.get(`/api/agent/sessions`)).data.sessions||[]}catch(e){console.error(`Failed to fetch sessions`,e)}}async function Oe(){q.value=!0,J.value=``,Y.value=``;try{let e={};X.value.model&&(e.model=X.value.model),X.value.base_url&&(e.base_url=X.value.base_url),X.value.api_key&&(e.api_key=X.value.api_key),await h.post(`/api/agent/llm/reload`,e),Y.value=`LLM config reloaded!`,Z.value=!1,await Q()}catch(e){J.value=e.response?.data?.detail||`Failed to reload LLM`}finally{q.value=!1}}async function ke(e){if(confirm(`Clear session ${e}?`))try{await h.delete(`/api/agent/sessions/${encodeURIComponent(e)}`),Y.value=`Session ${e} cleared`,await $()}catch(e){J.value=e.response?.data?.detail||`Failed to clear session`}}async function Ae(){if(confirm(`Clear ALL sessions? This cannot be undone.`))try{await h.delete(`/api/agent/sessions`),Y.value=`All sessions cleared`,await $(),await Q()}catch(e){J.value=e.response?.data?.detail||`Failed to clear sessions`}}let je=ae(()=>m.value?.stats?.uptime?m.value.stats.uptime:`N/A`);return re(()=>{Q(),$()}),(re,a)=>(d(),v(`div`,le,[g(`div`,b,[a[8]||=g(`div`,null,[g(`h2`,{class:`text-3xl font-black text-kivotos-navy tracking-tight skew-x-[-5deg] uppercase`},` Agent Control `),g(`p`,{class:`text-kivotos-gray font-mono text-xs mt-1 font-bold`},`RUNTIME MANAGEMENT // STATUS`)],-1),g(`button`,{onClick:a[0]||=e=>{Q(),$()},class:`flex items-center gap-2 bg-white px-4 py-2 rounded-lg border border-kivotos-cyan shadow-sm hover:bg-kivotos-cyan/10 transition-colors`,disabled:K.value},[_(o(e),{size:16,class:s([`text-kivotos-cyan`,{"animate-spin":K.value}])},null,8,[`class`]),a[7]||=g(`span`,{class:`font-mono font-bold text-kivotos-navy text-sm`},`Refresh`,-1)],8,x)]),J.value?(d(),v(`div`,S,[_(o(n),{size:18}),g(`span`,C,i(J.value),1),g(`button`,{onClick:a[1]||=e=>J.value=``,class:`ml-auto`},[_(o(t),{size:16})])])):c(``,!0),Y.value?(d(),v(`div`,w,[_(o(ee),{size:18}),g(`span`,T,i(Y.value),1),g(`button`,{onClick:a[2]||=e=>Y.value=``,class:`ml-auto`},[_(o(t),{size:16})])])):c(``,!0),g(`div`,E,[g(`div`,D,[g(`div`,O,[g(`div`,k,[_(o(f),{size:20,class:`text-kivotos-cyan`})]),a[9]||=g(`div`,null,[g(`h3`,{class:`font-bold text-kivotos-navy`},`Agent Status`),g(`p`,{class:`text-xs text-gray-500`},`Real-time agent information`)],-1),g(`div`,A,[g(`span`,{class:s([`w-3 h-3 rounded-full`,m.value?.running?`bg-green-500 animate-pulse`:`bg-gray-300`])},null,2),g(`span`,{class:s([`font-bold text-sm`,m.value?.running?`text-green-600`:`text-gray-500`])},i(m.value?.running?`RUNNING`:`STOPPED`),3)])]),m.value?(d(),v(`div`,j,[g(`div`,M,[g(`div`,N,[_(o(te),{size:14}),a[10]||=g(`span`,{class:`text-xs font-bold uppercase`},`Uptime`,-1)]),g(`p`,P,i(je.value),1)]),g(`div`,F,[g(`div`,I,[_(o(oe),{size:14}),a[11]||=g(`span`,{class:`text-xs font-bold uppercase`},`Messages`,-1)]),g(`p`,L,i(m.value.stats?.messages_processed||0),1)]),g(`div`,R,[g(`div`,z,[_(o(n),{size:14}),a[12]||=g(`span`,{class:`text-xs font-bold uppercase`},`Errors`,-1)]),g(`p`,{class:s([`font-mono font-bold`,m.value.stats?.errors_count>0?`text-red-600`:`text-kivotos-navy`])},i(m.value.stats?.errors_count||0),3)]),g(`div`,B,[g(`div`,V,[_(o(y),{size:14}),a[13]||=g(`span`,{class:`text-xs font-bold uppercase`},`Sessions`,-1)]),g(`p`,H,i(m.value.session_count||0),1)])])):c(``,!0),m.value?(d(),v(`div`,U,[g(`div`,W,[a[14]||=g(`h4`,{class:`font-bold text-sm text-gray-700`},`LLM Configuration`,-1),g(`button`,{onClick:a[3]||=e=>Z.value=!Z.value,class:`text-xs px-3 py-1 bg-kivotos-cyan/10 text-kivotos-cyan rounded-lg font-bold hover:bg-kivotos-cyan/20 transition-colors`},i(Z.value?`Cancel`:`Edit`),1)]),Z.value?(d(),v(`div`,pe,[g(`div`,null,[a[17]||=g(`label`,{class:`text-xs text-gray-500 block mb-1`},`Model`,-1),u(g(`input`,{"onUpdate:modelValue":a[4]||=e=>X.value.model=e,type:`text`,class:`w-full px-3 py-2 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-kivotos-cyan focus:border-transparent`,placeholder:`gpt-4o-mini`},null,512),[[p,X.value.model]])]),g(`div`,null,[a[18]||=g(`label`,{class:`text-xs text-gray-500 block mb-1`},`Base URL (optional)`,-1),u(g(`input`,{"onUpdate:modelValue":a[5]||=e=>X.value.base_url=e,type:`text`,class:`w-full px-3 py-2 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-kivotos-cyan focus:border-transparent`,placeholder:`https://api.openai.com/v1`},null,512),[[p,X.value.base_url]])]),g(`div`,null,[a[19]||=g(`label`,{class:`text-xs text-gray-500 block mb-1`},`API Key (leave empty to keep current)`,-1),u(g(`input`,{"onUpdate:modelValue":a[6]||=e=>X.value.api_key=e,type:`password`,class:`w-full px-3 py-2 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-kivotos-cyan focus:border-transparent`,placeholder:`sk-...`},null,512),[[p,X.value.api_key]])]),g(`button`,{onClick:Oe,disabled:q.value,class:`w-full py-2 bg-kivotos-cyan text-white rounded-lg font-bold hover:bg-kivotos-cyan/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2`},[_(o(e),{size:16,class:s({"animate-spin":q.value})},null,8,[`class`]),ne(` `+i(q.value?`Reloading...`:`Reload LLM Config`),1)],8,me)])):(d(),v(`div`,ue,[g(`div`,null,[a[15]||=g(`span`,{class:`text-xs text-gray-500`},`Model`,-1),g(`p`,de,i(m.value.model||`N/A`),1)]),g(`div`,null,[a[16]||=g(`span`,{class:`text-xs text-gray-500`},`Base URL`,-1),g(`p`,fe,i(m.value.base_url||`Default`),1)])]))])):c(``,!0),m.value?.tools?.length?(d(),v(`div`,he,[g(`div`,ge,[_(o(se),{size:16,class:`text-gray-500`}),g(`h4`,_e,`Available Tools (`+i(m.value.tools_count)+`)`,1)]),g(`div`,ve,[(d(!0),v(l,null,r(m.value.tools,e=>(d(),v(`span`,{key:e,class:`px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs font-mono`},i(e),1))),128))])])):c(``,!0)]),g(`div`,ye,[g(`div`,be,[g(`div`,xe,[_(o(y),{size:18,class:`text-kivotos-pink`}),a[20]||=g(`h3`,{class:`font-bold text-kivotos-navy`},`Sessions`,-1)]),G.value.length>0?(d(),v(`button`,{key:0,onClick:Ae,class:`text-xs px-2 py-1 bg-red-50 text-red-600 rounded font-bold hover:bg-red-100 transition-colors`},` Clear All `)):c(``,!0)]),G.value.length===0?(d(),v(`div`,Se,[_(o(y),{size:32,class:`mx-auto mb-2 opacity-50`}),a[21]||=g(`p`,{class:`text-sm`},`No active sessions`,-1)])):(d(),v(`div`,Ce,[(d(!0),v(l,null,r(G.value,e=>(d(),v(`div`,{key:e.session_id,class:`flex items-center justify-between p-3 bg-slate-50 rounded-lg group hover:bg-slate-100 transition-colors`},[g(`div`,we,[g(`p`,{class:`font-mono text-xs text-kivotos-navy truncate`,title:e.session_id},i(e.session_id),9,Te),g(`p`,Ee,i(e.message_count)+` messages`,1)]),g(`button`,{onClick:ee=>ke(e.session_id),class:`p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors opacity-0 group-hover:opacity-100`},[_(o(ce),{size:14})],8,De)]))),128))]))])])]))}});export{G as default};