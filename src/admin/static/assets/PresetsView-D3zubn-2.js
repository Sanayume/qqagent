import{A as e,C as t,D as n,F as r,M as i,P as a,T as o,_ as s,b as c,g as l,j as u,k as d,l as f,p,t as m,v as h,x as g}from"./index-DTcooqcV.js";var _={class:`h-full flex gap-6 p-6 overflow-hidden`},v={class:`w-64 flex flex-col gap-4`},y={class:`flex-1 bg-night-900/50 backdrop-blur rounded-2xl border border-sakura-500/10 p-3 overflow-y-auto custom-scrollbar`},b=[`onClick`],x={class:`truncate font-medium`},S={class:`flex-1 flex flex-col bg-night-900/50 backdrop-blur rounded-2xl border border-sakura-500/10 overflow-hidden relative`},C={key:0,class:`h-full flex flex-col`},w={class:`p-4 border-b border-white/5 flex items-center justify-between bg-white/5`},T={class:`flex items-center gap-4`},E={class:`text-lg font-bold text-gray-200`},D={key:0,class:`text-xs text-yellow-400 bg-yellow-400/10 px-2 py-0.5 rounded-full`},O={class:`flex gap-3`},k=[`disabled`],A={class:`flex-1 relative`},j={key:1,class:`h-full flex flex-col items-center justify-center text-gray-500`},M=m(o({__name:`PresetsView`,setup(o){let m=i([]),M=i(null),N=i(``),P=i(!1),F=i(!1),I=i(``),L=s(()=>N.value!==I.value);async function R(){P.value=!0;try{m.value=(await f.get(`/api/presets`)).data,!M.value&&m.value.length>0&&z(m.value[0])}catch(e){console.error(e)}finally{P.value=!1}}async function z(e){if(!(L.value&&!confirm(`å½“å‰æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šè¦åˆ‡æ¢å—ï¼Ÿ`))){P.value=!0,M.value=e;try{let t=await f.get(`/api/presets/${e}`);N.value=t.data.content,I.value=t.data.content}catch(e){console.error(e),alert(`åŠ è½½é¢„è®¾å¤±è´¥`)}finally{P.value=!1}}}async function B(){if(M.value){F.value=!0;try{await f.post(`/api/presets/${M.value}`,{content:N.value}),I.value=N.value,alert(`ä¿å­˜æˆåŠŸ âœ¨`)}catch(e){alert(e.response?.data?.detail||`ä¿å­˜å¤±è´¥`)}finally{F.value=!1}}}async function V(){let e=prompt(`è¯·è¾“å…¥æ–°é¢„è®¾åç§° (ä¸å« .yaml):`);if(e){if(!/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(e)){alert(`åç§°åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿æˆ–ä¸­æ–‡`);return}try{await f.post(`/api/presets/${e}`,{content:`system_prompt: |
  ä½ æ˜¯ä¸€ä¸ªå¯çˆ±çš„ AI åŠ©æ‰‹...

settings:
  model: gemini-pro
  temperature: 0.7
`}),m.value.push(e),z(e)}catch(e){alert(e.response?.data?.detail||`åˆ›å»ºå¤±è´¥`)}}}async function H(){if(M.value&&confirm(`ç¡®å®šè¦åˆ é™¤é¢„è®¾ "${M.value}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`))try{await f.delete(`/api/presets/${M.value}`),m.value=m.value.filter(e=>e!==M.value),m.value.length>0?(N.value=``,I.value=``,z(m.value[0])):(M.value=null,N.value=``,I.value=``)}catch(e){console.error(e),alert(`åˆ é™¤å¤±è´¥`)}}return n(R),(n,i)=>(d(),g(`div`,_,[h(`div`,v,[h(`div`,{class:`flex items-center justify-between`},[i[1]||=h(`h2`,{class:`text-xl font-bold text-white`},`é¢„è®¾åˆ—è¡¨`,-1),h(`button`,{onClick:V,class:`p-2 bg-gradient-to-r from-sakura-500 to-sakura-600 rounded-lg text-white hover:shadow-lg transition-all`,title:`æ–°å»ºé¢„è®¾`},` â• `)]),h(`div`,y,[(d(!0),g(l,null,e(m.value,e=>(d(),g(`div`,{key:e,class:a([`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all mb-2 group`,M.value===e?`bg-sakura-500/20 text-white`:`text-gray-400 hover:bg-white/5`]),onClick:t=>z(e)},[i[2]||=h(`span`,{class:`text-xl`},`ğŸ“„`,-1),h(`span`,x,r(e),1)],10,b))),128))])]),h(`div`,S,[M.value?(d(),g(`div`,C,[h(`div`,w,[h(`div`,T,[h(`span`,E,r(M.value)+`.yaml`,1),L.value?(d(),g(`span`,D,`â— æœªä¿å­˜æ›´æ”¹`)):c(``,!0)]),h(`div`,O,[h(`button`,{onClick:H,class:`px-4 py-2 rounded-lg text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors flex items-center gap-2`},[...i[3]||=[h(`span`,null,`ğŸ—‘ï¸`,-1),t(` åˆ é™¤ `,-1)]]),h(`button`,{onClick:B,disabled:!L.value||F.value,class:`px-6 py-2 bg-gradient-to-r from-miku-500 to-miku-600 text-white rounded-lg font-bold hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2`},[i[4]||=h(`span`,null,`ğŸ’¾`,-1),t(` `+r(F.value?`ä¿å­˜ä¸­...`:`ä¿å­˜`),1)],8,k)])]),h(`div`,A,[u(h(`textarea`,{"onUpdate:modelValue":i[0]||=e=>N.value=e,class:`absolute inset-0 w-full h-full bg-transparent text-gray-200 font-mono text-sm p-4 outline-none resize-none custom-scrollbar leading-relaxed`,spellcheck:`false`},null,512),[[p,N.value]])])])):(d(),g(`div`,j,[...i[5]||=[h(`div`,{class:`text-6xl mb-4 opacity-20`},`ğŸ“`,-1),h(`p`,null,`è¯·é€‰æ‹©æˆ–åˆ›å»ºä¸€ä¸ªé¢„è®¾æ–‡ä»¶`,-1)]]))])]))}}),[[`__scopeId`,`data-v-e71c3aa2`]]);export{M as default};